<div class="main-container">
<p class="tagname">Upload a Case</p>
<!-- <div class="container"> -->
    <div>
        <form [formGroup]="caseUploadForm">
            <mat-card>
                <mat-card-content>
                    <div class="grid-content">
                        <div class="form-group">
                            <mat-label>Client</mat-label>
                            <mat-select formControlName="clientId" (selectionChange)="clientSelectionChanged($event)">
                                <mat-option *ngFor="let client of clients" [value]="client._id">
                                    {{client.name}}
                                </mat-option>
                            </mat-select>
                        </div>
                        <div class="form-group">
                            <mat-label>Subclient</mat-label>
                            <mat-select formControlName="subclientId">
                                <mat-option *ngFor="let subclient of subclients" [value]="subclient._id">
                                    {{subclient.name}}
                                </mat-option>
                            </mat-select>
                        </div>
                        <div class="form-group">
                            <mat-label>Candidate Name</mat-label>
                            <input formControlName="candidateName" matInput>
                        </div>
                        <div class="form-group">
                            <mat-label>Employee Id</mat-label>
                            <input formControlName="employeeId" matInput>
                        </div>
                    </div>

                    <div class="grid-content">
                        <div class="form-group">
                            <mat-label>Package / A la carte</mat-label>
                            <mat-select formControlName="packageProfileAlacarte"
                                (selectionChange)="packageProfileAlacarteChanged($event)">
                                <mat-option value="PACKAGE">Package</mat-option>
                                <!-- <mat-option value="PROFILE">Profile</mat-option> -->
                                <mat-option value="A-LA-CARTE">A a carte</mat-option>
                            </mat-select>
                        </div>
                        <div class="form-group" *ngIf="caseUploadForm.get('packageProfileAlacarte')!.value=='PACKAGE'">
                            <mat-label>Select a Package</mat-label>
                            <mat-select formControlName="package" (selectionChange)="packageChanged($event)">
                                <mat-option *ngFor="let package of packages"
                                    [value]="package._id">{{package.name}}</mat-option>
                            </mat-select>
                        </div>
                        <div class="form-group" *ngIf="caseUploadForm.get('packageProfileAlacarte')!.value=='PROFILE'">
                            <mat-label>Select a Profile</mat-label>
                            <mat-select formControlName="profile" (selectionChange)="profileChanged($event)">
                                <mat-option *ngFor="let profile of profiles"
                                    [value]="profile._id">{{profile.name}}</mat-option>
                            </mat-select>
                        </div>
                        <div class="form-group"
                            *ngIf="caseUploadForm.get('packageProfileAlacarte')!.value=='PACKAGE' || caseUploadForm.get('packageProfileAlacarte')!.value=='PROFILE'">
                            <mat-label>TAT</mat-label>
                            <input matInput readonly type="text" formControlName="tat" placeholder="TAT">
                        </div>
                        <!-- <div class="form-group" *ngIf="caseUploadForm.get('packageProfileAlacarte')!.value=='PACKAGE'">
                            <mat-label>Price</mat-label>
                            <input matInput readonly type="text" size="8" formControlName="rate" placeholder="Price">
                        </div> -->
                    </div>
                </mat-card-content>
            </mat-card>
        </form>
    </div>
    <div>
        <div *ngIf="caseUploadForm.get('packageProfileAlacarte')!.value=='PACKAGE'">
            <div class="table">
                <div class="header">
                    <table mat-table [dataSource]="packageComponentsDataSource" matSort>
                        <ng-container matColumnDef="serialNumber">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> SL No. </th>
                            <td mat-cell *matCellDef="let row; let i = index" (click)="showDetails(row)">
                                {{ i + 1 }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="component">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Component Name</th>
                            <td mat-cell *matCellDef="let row"> {{row.componentName}} </td>
                        </ng-container>

                        <ng-container matColumnDef="details">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Details</th>
                            <td mat-cell *matCellDef="let row"> {{row.details}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="packageComponentsDisplayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: packageComponentsDisplayedColumns;"></tr>

                    </table>
                    <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator> -->
                </div>
            </div>
        </div>
        <div *ngIf="caseUploadForm.get('packageProfileAlacarte')!.value=='PROFILE'" fxFlex="100%" fxLayoutAlign="center"
            fxLayout="row">
            <div class="table">
                <div class="header">
                    <div>
                        <table mat-table [dataSource]="profileComponentsDataSource" matSort>

                            <ng-container matColumnDef="serialNumber">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> SL No. </th>
                                <td mat-cell *matCellDef="let row; let i = index" (click)="showDetails(row)">
                                    {{ i + 1 }}
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="component">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Component Name</th>
                                <td mat-cell *matCellDef="let row"> {{row.componentName}} </td>
                            </ng-container>

                            <ng-container matColumnDef="details">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Details</th>
                                <td mat-cell *matCellDef="let row"> {{row.details}} </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="profileComponentsDisplayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: profileComponentsDisplayedColumns"></tr>

                        </table>
                        <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator> -->
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="caseUploadForm.get('packageProfileAlacarte')!.value=='A-LA-CARTE'">
            <div class="table">
                <div class="header">
                    <div>
                        <table mat-table [dataSource]="componentsDataSource" matSort class="mat-table">
                            <ng-container matColumnDef="serialNumber">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> SL No. </th>
                                <td mat-cell *matCellDef="let row; let i = index" (click)="showDetails(row)">
                                    {{ i + 1 }}
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="component">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Component Name</th>
                                <td mat-cell *matCellDef="let row"> {{row.componentDisplayName}} </td>
                            </ng-container>

                            <ng-container matColumnDef="tat">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> TAT</th>
                                <td mat-cell *matCellDef="let row"> {{row.tat}} </td>
                            </ng-container>

                            <ng-container matColumnDef="details">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Details</th>
                                <td mat-cell *matCellDef="let row"> <input [(ngModel)]="row.instructions"
                                        value="row.instructions" type="text" maxlength="200"></td>
                            </ng-container>

                            <ng-container matColumnDef="maxChecks">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Max Checks</th>
                                <td mat-cell *matCellDef="let row"><input [(ngModel)]="row.maxChecks"
                                        value="row.maxChecks" type="text" size="3" maxlength="3"></td>
                            </ng-container>

                            <ng-container matColumnDef="select">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Select</th>
                                <td mat-cell *matCellDef="let row"> <mat-checkbox
                                        [disabled]="row.maxChecks==null || row.maxChecks <=0"
                                        [checked]="row.selected" [(ngModel)]="row.selected"></mat-checkbox> </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="componentsDisplayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: componentsDisplayedColumns"></tr>

                        </table>
                        <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- </div> -->

<!-- <div class="container"> -->
    <form [formGroup]="fileForm" (ngSubmit)="uploadButtonClicked()">
        <div class="footer">
            <mat-form-field> 
              <ngx-mat-file-input formControlName="caseZipFile"  multiple valuePlaceholder="Click here to select  files" placeholder="Select  Files"></ngx-mat-file-input>
            </mat-form-field>
            <button class="btn-rounded" type="submit">
              <div class="button-content">
                <mat-icon>file_upload</mat-icon>
                <span>Upload</span>
              </div>
            </button>
          </div>
        <!-- <div class="footer">
                <mat-form-field>
                    <ngx-mat-file-input formControlName="caseZipFile" accept=".zip" valuePlaceholder="Click here to select a zip file" placeholder="Select a zip File" ></ngx-mat-file-input>
                </mat-form-field>
                <button class="btn-rounded" type="submit">
                    <div class="button-content">
                      <mat-icon>file_upload</mat-icon>
                      <span>Upload</span>
                    </div>
                </button>
        </div> -->
    </form>
<!-- </div> -->
</div>