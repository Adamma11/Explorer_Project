<div class="container-fluid" style="box-sizing: border-box;margin: 0; padding: 0;">
    <!-- <mat-toolbar class="text-white mb-3 mt-3">
        <mat-toolbar-row class="justify-content-center">
          <h2>Component Details</h2>
        </mat-toolbar-row>
    </mat-toolbar> -->
    <div class="border p-2">
        <form [formGroup]="componentDetailsForm">
            <div class="row">
                <div class="col-md-4 col-lg-4 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                        <input formControlName="displayName" type="text" matInput  placeholder="Display Name" required>
                        <mat-label>Display Name</mat-label>
                    </mat-form-field> 
                </div>
                <div class="col-md-3 col-lg-3 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                        <input (keypress)="omitSpecialChar($event)" formControlName="name" type="text" matInput  placeholder="Internal Name" required (input)="setName($event)">
                        <mat-label>Internal Name</mat-label>
                    </mat-form-field>  
                </div>
                <div class="col-md-2 col-lg-2 mb-3">
                        <mat-checkbox formControlName="fileUploadRequired" class="w-100">
                            <mat-label>Upload File</mat-label>
                        </mat-checkbox>   
                </div>
                <div class="col-md-3 col-lg-3 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-select formControlName="allowCopyingFrom">
                            <mat-option value="null">None</mat-option>
                            <mat-option *ngFor="let component of components" [value]="component._id">{{component.displayName}}</mat-option>
                        </mat-select>
                        <mat-label>Allow Copying From</mat-label>
                    </mat-form-field>    
                </div>


            </div>
                <!-- <div class="row">
                <div class="col-md-3 col-lg-3 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-select formControlName="type">
                            <mat-option value="address">Address</mat-option>
                            <mat-option value="education">Education</mat-option>
                            <mat-option value="employment">Employment</mat-option>
                            <mat-option value="others">Others</mat-option>
                        </mat-select>
                        <mat-label>Allow Copying From</mat-label>
                    </mat-form-field>    
                </div>
                </div> -->
        </form>

    </div>
    <div class="border p-3 overflow-auto">
        <table class="table table-striped" mat-table [dataSource]="dataSource" cdkDropList [cdkDropListData]="dataSource" (cdkDropListDropped)="dropTable($event)">
            <caption></caption>
            <ng-container matColumnDef="name">
                <th mat-header-cell  *matHeaderCellDef  >Field Name</th>
                <td mat-cell *matCellDef="let componentField;let i=index">
                    <input size="10" maxlength="100" (keypress)="omitSpecialChar($event)" [(ngModel)]="componentField.name" [value]="componentField.name" type="text">                    
                </td>
            </ng-container>                        
            <ng-container matColumnDef="type">
                <th mat-header-cell  *matHeaderCellDef  >Type</th>
                <td mat-cell  *matCellDef="let componentField">
                    <select [(ngModel)]="componentField.type" [value]="componentField.type"  matInput>
                        <option value="TEXT">Text</option>
                        <option value="SELECT">Select</option>
                        <option value="CHECKBOX">Checkbox</option>
                        <option value="NUMBER">Number</option>
                        <option value="TEXTAREA">Textarea</option>
                        <option value="EMAIL">Email</option>
                        <option value="TELEPHONE">Telephone</option>
                        <option value="URL">url</option>
                        <option value="TIME">Time</option>
                        <option value="DATE">Date</option>
                        <option value="AC-PIN">Auto Complete - PIN</option>
                    </select>                    
                </td>
            </ng-container>                                    
            <ng-container matColumnDef="value">
                <th mat-header-cell  *matHeaderCellDef >Value</th>
                <td mat-cell  *matCellDef="let componentField">
                    <input [disabled]="componentField.type!='SELECT'" size="10" [(ngModel)]="componentField.values" [value]="componentField.values" type="text">                    
                </td>
            </ng-container>                                                        
            <ng-container matColumnDef="size">
                <th mat-header-cell  *matHeaderCellDef >Size</th>
                <td mat-cell  *matCellDef="let componentField">
                    <input [disabled]="componentField.type=='SELECT'" size="3" [(ngModel)]="componentField.size" [value]="componentField.size" type="text" >                    
                </td>
            </ng-container>                                                        
            <ng-container matColumnDef="label">
                <th mat-header-cell  *matHeaderCellDef >Label</th>
                <td mat-cell  *matCellDef="let componentField">
                    <input size="10" [(ngModel)]="componentField.label" [value]="componentField.label" type="text">                    
                </td>
            </ng-container>
            <ng-container matColumnDef="lhsRhs">
                <th mat-header-cell  *matHeaderCellDef >LHS / RHS</th>
                <td mat-cell  *matCellDef="let componentField">
                    <select [(ngModel)]="componentField.lhsRhs" [value]="componentField.lhsRhs">
                        <option value="LHS">LHS</option>
                        <option value="RHS">RHS</option>
                        <option value="BOTH">Both</option>
                    </select>        
                </td>
            </ng-container>            
            <ng-container matColumnDef="mandatory">
                <th mat-header-cell  *matHeaderCellDef >Mandatory</th>
                <td mat-cell  *matCellDef="let componentField">
                    <select [(ngModel)]="componentField.mandatory" [value]="componentField.mandatory">
                        <option value="MANDATORY">Mandatory</option>
                        <option value="NOT-MANDATORY">Not Mandatory</option>
                        <option value="FIELD-VALUE">For Field Value</option>
                    </select>        
                </td>
            </ng-container>                       
            <ng-container matColumnDef="conditionField">
                <th mat-header-cell  *matHeaderCellDef >Condition Field</th>
                <td mat-cell  *matCellDef="let componentField">
                    <select [disabled]="componentField.mandatory !='FIELD-VALUE'" [(ngModel)]="componentField.conditionField" [value]="componentField.conditionField">
                        <option *ngFor="let currentCompField of currentCompFields" value={{currentCompField.name}}>{{currentCompField.name}}</option>                                
                    </select>        
                </td>
            </ng-container>                       
            <ng-container matColumnDef="condition">
                <th mat-header-cell  *matHeaderCellDef >Condition</th>
                <td mat-cell  *matCellDef="let componentField">
                    <select [disabled]="componentField.mandatory !='FIELD-VALUE'" [(ngModel)]="componentField.condition" [value]="componentField.condition">
                        <option value="==">==</option>
                        <option value="!=">!=</option>
                    </select>        
                </td>
            </ng-container>                                                
            <ng-container matColumnDef="conditionValue">
                <th mat-header-cell  *matHeaderCellDef >Condition Value</th>
                <td mat-cell  *matCellDef="let componentField">
                    <input [disabled]="componentField.mandatory !='FIELD-VALUE'" size="10" [(ngModel)]="componentField.conditionValue" [value]="componentField.conditionValue" type="text">                    
                </td>
            </ng-container>
            <ng-container matColumnDef="displayField">
                <th mat-header-cell  *matHeaderCellDef >Display Field</th>
                <td mat-cell  *matCellDef="let componentField">
                    <mat-checkbox [(ngModel)]="componentField.dislpayField" [checked]="componentField.displayField">
                        
                    </mat-checkbox>
                </td>
            </ng-container>                       
            <ng-container matColumnDef="delete">
                <th mat-header-cell  *matHeaderCellDef >Delete</th>
                <td mat-cell  *matCellDef="let componentField">
                    <button style="width: 30px;height: 30px;" mat-icon-button ><mat-icon>delete_forever</mat-icon></button>                    
                </td>
            </ng-container>            
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;let i=index;" cdkDrag [cdkDragData]="row"></tr>

        </table>


    </div>
    <div class="d-flex justify-content-between mt-3">
        <div>
        </div>
        <div>
            <button matTooltip="Go back" class="btn btn-dark text-white  mt-3 mx-3 save-button" (click)="backButtonClicked()" >Back</button>          
            <button matTooltip="Add new component" class="btn btn-danger mt-3 mx-3 save-button" (click)="addButtonClicked()" >ADD </button>  
            <button [disabled]="!componentDetailsForm.valid"  matTooltip="Save Component Details" class="btn btn-save mt-3 mx-3 save-button"(click)="saveButtonClicked()">Save</button>
    
        </div>
      </div>

</div>