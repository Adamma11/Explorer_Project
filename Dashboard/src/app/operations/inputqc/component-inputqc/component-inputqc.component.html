<!-- venky 10/10 added div and style -->
<div style="margin: 0px 2rem;">
    <h1 class="tagname">Details</h1>
    <mat-divider style=" color: aqua; background-color: #33BABC;" ></mat-divider>
    <div style="display: flex; flex-wrap: wrap;">
        <!-- <button class="btn-rounded-1" (click)="QuickNote()">Comments</button>   -->
        <button mat-raised-button class="btn-save btn-rounded-1" (click)="QuickNote()">Comments</button>

    </div>
    <mat-divider style="margin: 9px 0px; color: aqua; background-color: #33BABC;" ></mat-divider>
    
    
    
    <!-- <div  style="display: flex; flex-wrap: wrap;">
        <h4  style="font-weight: bold;font-size: 18px; text-decoration: underline;">Case Doc's:</h4> 
        <button class="btn-rounded-3"  *ngFor="let file of proofsUploaded"  style="margin-right: 10px; margin-left: 19px; max-width: 100px; overflow: hidden; text-overflow: ellipsis;" >{{ file }}
            <span  (click)="downloadcdfFile(file)" style="cursor: pointer; margin: 4px;"><i class="fas fa-download"></i></span></button>
        </div>  -->
        <!-- <div style="display: flex; flex-wrap: wrap;"> -->
            <!-- venky 10/10 added styles -->
            <!-- <h4 style="font-weight: bold; font-size: 18px; text-decoration: underline;">Case Doc's:</h4> -->
            <!-- <button class="btn-rounded-3 fixed-size-btn" 
                    *ngFor="let file of proofsUploaded" 
                    style="margin-right: 10px; margin-left: 19px; margin-top: 5px; overflow: hidden; display: flex; align-items: center; justify-content: space-between;">
                <span>{{ file.length > 8 ? file.substring(0, 8) + '..' : file }}</span>
                <span (click)="downloadcdfFile(file)" style="cursor: pointer;">
                    <i class="fas fa-download"></i>
                </span>
                <span  (click)="deletecdfFile(file)" style="cursor: pointer;">&#10006;</span>
            </button> -->

             <!-- <button class="btn-rounded-3 fixed-size-btn" 
        *ngFor="let file of proofsUploaded" 
        style="margin-right: 10px; margin-left: 19px; margin-top: 5px;"
        (click)="previewCaseDoc(file)">
    <span>{{ file.length > 8 ? file.substring(0, 8) + '..' : file }}</span>
    <span (click)="downloadcdfFile(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
      
    </span>
    <span (click)="deletecdfFile(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
       
    </span>
</button>

        </div> -->
        
        
        
        <!-- venky 10/10 modified margin -->
        <mat-divider style="margin: 9px 0px; color: aqua; background-color: #33BABC;" ></mat-divider>
        
        <!-- <div  style="display: flex; flex-wrap: wrap;"> -->
            <!-- venky 10/10 added styles -->
            <!-- <h4 style="font-weight: bold;font-size: 18px; text-decoration: underline;">CDF:</h4> -->
            <!-- <button class="save-btn btn-rounded-3 fixed-size-btn"  *ngFor="let file of files"  style="margin-right: 10px; margin-left: 19px;  overflow: hidden; text-overflow: ellipsis; width: fit-content;" >
                   <span>{{ file.length > 8 ? file.substring(0, 8) + '..' : file }}</span>
                <span  (click)="downloadProofOfWork(file)" style="cursor: pointer;"><i class="fas fa-download"></i></span>
                <span  (click)="deleteProofOfWork(file)" style="cursor: pointer;">&#10006;</span></button> -->
            
             <!-- <button class="save-btn btn-rounded-3 fixed-size-btn"
        *ngFor="let file of files"
        style="margin-right: 10px; margin-left: 19px; margin-top: 5px;"
        (click)="previewProofOfWork(file)">
    <span>{{ file.length > 8 ? file.substring(0, 8) + '..' : file }}</span>
    <span (click)="downloadProofOfWork(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
       
    </span>
    <span (click)="deleteProofOfWork(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
   
    </span>
</button>

            </div>  -->


             <!-- added code oct-16 -->
            
  
<!-- added code oct-16 -->
            
  <div class="page-container" [class.preview-active]="previewFile">
  <!--  Left Preview Panel -->
  <div class="preview-panel" *ngIf="previewFile">
    <app-file-preview-dialog
      [data]="previewFile"
      (closePreview)="handlePreviewClose($event)">
    </app-file-preview-dialog>
  </div>

  <!--  Right Content Panel -->
  <div class="main-content">
    <!--  Case Docs -->
    <div class="cdf-section">
      <h4 class="cdf-title">Case Doc's:</h4>
      <div class="cdf-files">
        <button
          class="btn-rounded-3 fixed-size-btn"
          *ngFor="let file of proofsUploaded"
          (click)="previewCaseDoc(file)">
          <span>{{ file.length > 8 ? file.substring(0, 8) + '..' : file }}</span>
          <span (click)="downloadcdfFile(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
            <i class="fas fa-download"></i>
          </span>
          <span (click)="deletecdfFile(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
            &#10006;
          </span>
        </button>
      </div>
    </div>

    <mat-divider style="margin: 9px 0px; background-color: #33BABC;"></mat-divider>

    <!--  CDF -->
    <div class="cdf-section">
      <h4 class="cdf-title">CDF:</h4>
      <div class="cdf-files">
        <button
          class="save-btn btn-rounded-3 fixed-size-btn"
          *ngFor="let file of files"
          (click)="previewProofOfWork(file)">
          <span>{{ file.length > 8 ? file.substring(0, 8) + '..' : file }}</span>
          <span (click)="downloadProofOfWork(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
            <i class="fas fa-download"></i>
          </span>
          <span (click)="deleteProofOfWork(file); $event.stopPropagation();" style="cursor: pointer; margin-left: 8px;">
            &#10006;
          </span>
        </button>
      </div>
    </div>
            
            
            
            <mat-divider style="color: aqua; background-color: #33BABC; margin-top: 14px " ></mat-divider>
            
            
            <!-- <mat-divider style="margin-top: 12px;"></mat-divider> -->
            <div class="mat-card">
                <div class="document-card">
                    <h4 class="card-heading" style="font-weight: bold;font-size: 18px; text-decoration: underline;">{{componentDisplayName}}</h4>
                    <form [formGroup]="inputqcForm" (ngSubmit)="saveButtonClicked()">
                        <mat-card>
                            <mat-card-content class="form-btn">
                                <div class="form-row" style="display: flex;">
                                    <div class="form-group" style="width: 200px;"> 
                                        <select formControlName="status">
                                            <option value="" disabled selected>Status</option>
                                            <option value="INPUTQC-ACCEPTED">Accept</option>
                                            <option value="INPUTQC-REJECTED">Reject</option>
                                        </select>
                                    </div>
                                    <div class="form-group" *ngIf="inputqcForm.get('status')!.value=='INPUTQC-REJECTED'">
                                        <textarea formControlName="inputqcComments" matInput rows="1" cols="30"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <!-- <button class="btn-rounded" type="submit">Save</button> -->
                                        <!-- <button mat-raised-button class="btn-save" type="submit"> Save </button> -->
                                         <button  mat-raised-button class="btn-save" [disabled]="!componentData" type="submit"> Save </button>
                                    </div>
                                </div>
                                <!-- <div >
                                    <button mat-raised-button class="button-group" color="primary" type="submit">Save</button>
                                    <button mat-raised-button class="button-group" color="primary" (click)="cancelButtonClicked($event)">Cancel</button>
                                </div> -->
                                
                                
                            </mat-card-content>
                        </mat-card>
                    </form>
                </div>
            </div> 
            
            <form [formGroup]="componentDataEntryForm">
                <mat-card>
                    <mat-card-content class="grid-content">
                        <div class="form-row" *ngFor="let componentField of componentFields">
                            <div class="form-group"
                            *ngIf="componentField.type=='TEXT' && (componentField.lhsRhs=='LHS' || componentField.lhsRhs=='BOTH')">
                            <mat-label>{{componentField.label}}</mat-label>
                            <input  formControlName="{{componentField.name}}" matInput size="30" type="text"
                            placeholder={{componentField.label}}>
                        </div>
                        <div class="form-group"
                        *ngIf="componentField.type=='TEXTAREA' && (componentField.lhsRhs=='LHS' || componentField.lhsRhs=='BOTH')">
                        <mat-label>{{componentField.label}}</mat-label>
                        <textarea  maxlength="{{componentField.size}}" rows="1" cols="30"
                        formControlName="{{componentField.name}}" matInput size="30" type="text"
                        placeholder={{componentField.label}}></textarea>
                    </div>
                    <div class="form-group"
                    *ngIf="componentField.type=='AC-UNI' && (componentField.lhsRhs=='LHS' || componentField.lhsRhs=='BOTH')">
                    <mat-label>University</mat-label>
                    <input  placeholder="Enter University Name" matInput
                    formControlName="{{componentField.name}}" [matAutocomplete]="autoUni">
                    <mat-autocomplete #autoUni="matAutocomplete">
                        <mat-option *ngIf="isLoading">Loading...</mat-option>
                        <ng-container *ngIf="!isLoading">
                            <mat-option *ngFor="let university of filteredUniversities" [value]="university.name">
                                <span>{{university.name}}</span>
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                </div>
                <div class="form-group"
                *ngIf="componentField.type=='AC-COM' && (componentField.lhsRhs=='LHS' || componentField.lhsRhs=='BOTH')">
                <mat-label>Company Name</mat-label>
                <input  placeholder="Enter Company Name" matInput formControlName="{{componentField.name}}"
                [matAutocomplete]="autoCom">
                <mat-autocomplete #autoCom="matAutocomplete">
                    <mat-option *ngIf="isLoading">Loading...</mat-option>
                    <ng-container *ngIf="!isLoading">
                        <mat-option *ngFor="let company of filteredCompanies" [value]="company.name">
                            <span>{{company.name}}</span>
                        </mat-option>
                    </ng-container>
                </mat-autocomplete>
            </div>
            <div class="form-group"
            *ngIf="componentField.type=='SELECT' && (componentField.lhsRhs=='LHS' || componentField.lhsRhs=='BOTH')">
            <mat-label>{{componentField.label}}</mat-label>
            <mat-select formControlName="{{componentField.name}}">
                <ng-template ngFor let-val="$implicit" [ngForOf]="getValues(componentField.name)">
                    <mat-option value={{val}}>{{val}}</mat-option>
                </ng-template>
            </mat-select>
        </div>
        <div class="form-group"
        *ngIf="componentField.type=='DATE' && (componentField.lhsRhs=='LHS' || componentField.lhsRhs=='BOTH')">
        <mat-label>{{componentField.label}}</mat-label>
        <input  formControlName={{componentField.name}} matInput size="11" maxlength="11"
        type="date" placeholder={{componentField.label}}>
    </div>
</div>
<!-- <mat-divider style="color: aqua; background-color: #33BABC; margin-top: 14px " ></mat-divider> -->

<div class="form-row" *ngIf="componentDataEntryForm.get('dataEntryStatus')?.value=='INSUF-1-REQ'">
    <!-- <div class="form-group">
        <mat-label>Status</mat-label>
        <mat-select readonly formControlName="dataEntryStatus">
            <mat-option value="INSUF-1-REQ">Insufficiency</mat-option>
            <mat-option value="DE-COMPLETED">Data Entry Completed</mat-option>
        </mat-select>
    </div> -->
    <div class="form-group" >
        <mat-label>Insufficiency Details</mat-label>
        
        <textarea readonly formControlName="insufficiencyComments" matInput rows="3" cols="20" placeholder="Insufficiency Details"></textarea>
        
    </div>
</div>

</mat-card-content>
</mat-card>
</form>
</div>  <!-- added previvew div  -->
</div>  <!-- added previvew div  -->
</div>

<!-- <form [formGroup]="inputqcForm" >
    <mat-card>
        <mat-card-content class="form-btn">
            <div class="form-row" style="display: flex;">
                <div class="form-group" style="width: 200px;">
                    <div class="form-group" *ngIf="inputqcForm.get('status')!.value === 'INPUTQC-REJECTED'">
                        <mat-label>Rejection Comments</mat-label>
                        <textarea formControlName="inputqcComments" matInput rows="1" cols="30"></textarea>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</form> -->
<!-- <form [formGroup]="inputqcForm" (ngSubmit)="saveButtonClicked()">
    <mat-card>
        <mat-card-content class="form-btn">
            <div class="form-row" style="display: flex;">
                <div class="form-group" style="width: 200px;">
                    <mat-label>Status</mat-label>
                    <mat-select formControlName="status" (selectionChange)="acceptRejectChanged($event)">
                        <mat-option value="INPUTQC-ACCEPTED">Accept</mat-option>
                        <mat-option value="INPUTQC-REJECTED">Reject</mat-option>
                    </mat-select>
                </div>
                <div class="form-group" *ngIf="inputqcForm.get('status')!.value === 'INPUTQC-REJECTED'">
                    <mat-label>Rejection Comments</mat-label>
                    <textarea formControlName="inputqcComments" matInput rows="1" cols="30"></textarea>
                </div>
            </div>
            
            <div>
                <button mat-raised-button color="primary" class="button-group" type="submit">Save</button>
                <button mat-raised-button color="primary" class="button-group" (click)="cancelButtonClicked($event)">Cancel</button>
            </div>
            
        </mat-card-content>
        
    </mat-card>
</form> -->