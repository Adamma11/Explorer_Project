<h1 class="tagname">Case Status in depth</h1>
<div class="table-container">
  <div class="table"> 
    <div class="header">
      <div class="grid-content">
        <div class="form-group">
          <mat-label>Show Cases that are</mat-label>
          <mat-select placeholder="Select One" [(ngModel)]="requiredCases"
            (selectionChange)="caseTypeSelctionChanged($event)">
            <!-- <mat-option value="" disabled selected>Show Cases that are</mat-option> -->
            <mat-option value="PENDING">Pending</mat-option>
            <mat-option value="COMPLETED">Completed</mat-option>
            <mat-option value="NAME-SEARCH">Search by name</mat-option>
            <mat-option value="INITIATION-DATE">Search by Initiation Date</mat-option>
            <mat-option value="CASE-ID">Search by Case Id</mat-option>
    
          </mat-select>
        </div>
      <ng-container *ngIf="requiredCases==='PENDING'">

          <div class="form-group">
            <button class="btn-rounded" (click)="searchPendingCases()">Fetch</button>
          </div>
        </ng-container>
        <ng-container *ngIf="requiredCases==='COMPLETED'">
          <div class="form-group">
            <mat-label>Start Date</mat-label>
            <input matInput type="date" [(ngModel)]="startDate" [value]="startDate">
          </div>
          <div class="form-group">
            <mat-label>End Date</mat-label>
            <input matInput [(ngModel)]="endDate" [value]="endDate" type="date">
          </div>
          <div class="form-group">
            <button class="btn-rounded" (click)="searchByCompletionDateButtonClicked()">Fetch</button>
          </div>
        </ng-container>
      
        <ng-container *ngIf="requiredCases=='NAME-SEARCH'">
          <div class="form-group">
            <mat-label>Provide a Candidate Name to Search</mat-label>
            <input matInput type="text" [(ngModel)]="nameSearchValue" value="nameSearchValue"
              placeholder="Provide a candidate name to search">
          </div>
          <div class="form-group">
            <button class="btn-rounded" (click)="searchByNameButtonClicked()">Fetch</button>
          </div>
        </ng-container>
      
        <ng-container *ngIf="requiredCases==='INITIATION-DATE'">
          <div class="form-group">
            <mat-label>Provide Initiation End Date</mat-label>
            <input matInput type="date" [(ngModel)]="initiationStartDateSearchValue" value="initiationStartDateSearchValue"
              placeholder="Provide Initiation Start Date">
          </div>
          <div class="form-group">
            <mat-label>Provide Initiation End Date</mat-label>
            <input matInput type="date" [(ngModel)]="initiationEndDateSearchValue" value="initiationEndDateSearchValue"
              placeholder="Proide Initiation Date">
          </div>
          <div class="form-group">
            <button class="btn-rounded" (click)="searchByInitiationDateButtonClicked()">Fetch</button>
          </div>
        </ng-container>
      
        <ng-container *ngIf="requiredCases==='CASE-ID'">
          <div class="form-group">
            <mat-label>Provide a Case Id to Search</mat-label>
            <input matInput type="text" [(ngModel)]="caseIdSearchValue" value="caseIdSearchValue"
              placeholder="Provide a case id to search">
          </div>
          <div class="form-group">
            <button class="btn-rounded" (click)="searchByCaseIdButtonClicked()">Fetch</button>
          </div>
        </ng-container>
      
        <!-- <div fxFlexOffset="20px" fxFlex="30%"> -->
          <form>
            <div class="form-group">
              <mat-label>Apply Client Filter</mat-label>
              <input matInput type="text" [formControl]="requiredClient" [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                <mat-option *ngFor="let client of filteredOptions | async" [value]="client">
                  {{client.name}}
                </mat-option>
              </mat-autocomplete>
            </div>
          </form>
        <!-- </div> -->
      </div>
      <!-- <div class="table-header">
        <div class="form-table-group">
          <div class="form-table-row">
            <mat-label>Filter</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
          </div>
          <button mat-icon-button class="add-button">
            <mat-icon>play_for_work</mat-icon>
          </button>
        </div>
      </div> -->
      <div class="table-header">
        <div class="filter-card">
          <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
        </div>
        <button class="btn-rounded" style="height: 29px;"><mat-icon>play_for_work</mat-icon></button>
      </div>
      <div>
        <table mat-table [dataSource]="dataSource" matSort>

          <ng-container matColumnDef="serialNumber">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> SL No. </th>
            <td mat-cell *matCellDef="let row; let i = index" (click)="showDetails(row)">
              {{ i + 1 + myPaginator.pageIndex * myPaginator.pageSize }}
            </td>
          </ng-container>

          <ng-container matColumnDef="caseId">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Case Id </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.caseId}}</td>
          </ng-container>

          <ng-container matColumnDef="candidateName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Candidate Name </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.candidateName}} </td>
          </ng-container>

          <ng-container matColumnDef="employeeId">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Employee Id </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.pinCode}} </td>
          </ng-container>

          <ng-container matColumnDef="clientName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Client </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.clientName}} </td>
          </ng-container>

          <ng-container matColumnDef="subclientName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Subclient Name </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.subclientName}} </td>
          </ng-container>

          <ng-container matColumnDef="initiationDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Initiation Date </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.initiationDate | date:'dd-MMM-yyyy'}}
            </td>
          </ng-container>

          <ng-container matColumnDef="tatEndDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> TAT End Date </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.tatEndDate | date:'dd-MMM-yyyy'}} </td>
          </ng-container>

          <ng-container matColumnDef="completionDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Completion Date </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.outputqcCompletionDate == null ? '' :
              row.outputqcCompletionDate | date:'dd-MMM-yyyy'}} </td>
          </ng-container>

          <ng-container matColumnDef="pendingcomponents">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Pending count </th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.pendingComponentsCount}} </td>
          </ng-container>

          <ng-container matColumnDef="displayStatus">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
            <td mat-cell *matCellDef="let row" (click)="showDetails(row)"> {{row.displayStatus}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" [attr.colspan]="displayedColumns.length">No data matching the filter "{{input.value}}"
            </td>
          </tr>

        </table>
        <div style="position:absolute;left: 450px;top: 400px;" *ngIf="resourceLoaded == false" fxFlexAlign="center">
          <mat-spinner></mat-spinner>
          <div>Report is being generated.Please wait...</div>
        </div>
        <mat-paginator #myPaginator [pageSizeOptions]="[10, 25, 100]" aria-label="Select page of users"></mat-paginator>
      </div>
    </div>
  </div>

  <div class="details" *ngIf="showDetailsFlag">
    <div *ngIf="selectedRow">
      <h2>Details</h2>
      <!-- <p>SL No: {{selectedRow.i}}</p> -->
    </div>
  </div>

</div>