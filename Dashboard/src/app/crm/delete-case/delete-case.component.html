<p class="tagname">Delete Cases</p>
<mat-divider style="margin: 20px; color: aqua; background-color: #33BABC;"></mat-divider>

<div class="table-container">
    <div class="table">
      <div class="header">
        <div class="grid-content">
          <div class="form-group">
            <mat-label>Show Cases that are</mat-label>
            <mat-select [(ngModel)]="requiredCases">
                <mat-option value="-1" selected disabled>Select One</mat-option>
                <mat-option value="COMPLETED">Completed</mat-option>
                <mat-option value="CASE-ID">Search by Case Id</mat-option>
            </mat-select>
          </div>
        
          <ng-container *ngIf="requiredCases==='COMPLETED'">
            <div class="form-group">
              <mat-label>Start Date</mat-label>
              <input matInput type="date" [(ngModel)]="startDate" [value]="startDate">
            </div>
            <div class="form-group">
              <mat-label>End Date</mat-label>
              <input matInput [(ngModel)]="endDate" [value]="endDate" type="date">
            </div>
            <div class="form-group">
              <button class="btn-rounded" (click)="searchByCompletionDateButtonClicked()">Fetch</button>
            </div>
          </ng-container>

          <ng-container *ngIf="requiredCases==='CASE-ID'">
            <div class="form-group">
              <mat-label>Provide a Case Id to Search</mat-label>
              <input matInput type="text" [(ngModel)]="caseIdSearchValue" value="caseIdSearchValue"
                placeholder="Provide a case id to search">
            </div>
            <div class="form-group">
              <button class="btn-rounded" (click)="searchByCaseIdButtonClicked()">Fetch</button>
            </div>
          </ng-container>
        
            <form>
              <div class="form-group">
                <mat-label>Apply Client Filter</mat-label>
                <input matInput type="text" [formControl]="requiredClient" [matAutocomplete]="auto">
                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                  <mat-option *ngFor="let client of filteredOptions | async" [value]="client">
                    {{client.name}}
                  </mat-option>
                </mat-autocomplete>
              </div>
            </form>
        </div>
        <div class="table-header">
          <div class="filter-card">
            <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
          </div>
          <button class="btn-rounded" style="height: 29px;"><mat-icon>play_for_work</mat-icon></button>
        </div>
        <div>
            <table mat-table [dataSource]="dataSource" matSort>
    
              <ng-container matColumnDef="serialNumber">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> SL No. </th>
                <td mat-cell *matCellDef="let row; let i = index">
                  {{ i + 1 + myPaginator.pageIndex * myPaginator.pageSize }}
                </td>
              </ng-container>
    
              <ng-container matColumnDef="caseId">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Case Id </th>
                <td mat-cell *matCellDef="let row"> {{row.caseId}}</td>
              </ng-container>
    
              <ng-container matColumnDef="candidateName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Candidate Name </th>
                <td mat-cell *matCellDef="let row"> {{row.candidateName}} </td>
              </ng-container>
    
              <ng-container matColumnDef="employeeId">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Employee Id </th>
                <td mat-cell *matCellDef="let row"> {{row.pinCode}} </td>
              </ng-container>
    
              <ng-container matColumnDef="clientName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Client </th>
                <td mat-cell *matCellDef="let row"> {{row.clientName}} </td>
              </ng-container>
    
              <ng-container matColumnDef="subclientName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Subclient Name </th>
                <td mat-cell *matCellDef="let row"> {{row.subclientName}} </td>
              </ng-container>
    
              <ng-container matColumnDef="initiationDate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Initiation Date </th>
                <td mat-cell *matCellDef="let row"> {{row.initiationDate | date:'dd-MMM-yyyy'}}
                </td>
              </ng-container>
    
              <ng-container matColumnDef="tatEndDate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> TAT End Date </th>
                <td mat-cell *matCellDef="let row"> {{row.tatEndDate | date:'dd-MMM-yyyy'}} </td>
              </ng-container>
    
              <ng-container matColumnDef="completionDate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Completion Date </th>
                <td mat-cell *matCellDef="let row"> {{row.completionDate == null ? '' :
                  row.completionDate | date:'dd-MMM-yyyy'}} </td>
              </ng-container>
    
              <ng-container matColumnDef="pendingcomponents">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Pending count </th>
                <td mat-cell *matCellDef="let row"> {{row.pendingComponentsCount}} </td>
              </ng-container>
    
              <ng-container matColumnDef="displayStatus">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
                <td mat-cell *matCellDef="let row"> {{row.displayStatus}} </td>
              </ng-container>

              <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef="let row"> <mat-checkbox [(ngModel)]="selectAllCheckbox"
                    (change)="onCheckboxSelectAll()"></mat-checkbox> </th>
                <td mat-cell *matCellDef="let row; let i = index">
                  <mat-checkbox [(ngModel)]="row.selected" (change)="onCheckboxSelected()">
                  </mat-checkbox>
                </td>
              </ng-container>
    
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    
              <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" [attr.colspan]="displayedColumns.length">No data matching the filter "{{input.value}}"
                </td>
              </tr>
    
            </table>
            <div style="float: right;">
              <button style="margin-top:10px;height:30px;margin-left: 20px; color:black;" 
              mat-raised-button color="primary" (click)="deleteacase()" [disabled]="!checkboxSelected"> Delete </button>
          </div>
            <div style="position:absolute;left: 450px;top: 400px;" *ngIf="resourceLoaded == false" fxFlexAlign="center"> 
              <mat-spinner></mat-spinner>
              <div>Report is being generated.Please wait...</div>
            </div>
            <mat-paginator #myPaginator [pageSizeOptions]="[10, 25, 100]" aria-label="Select page of users"></mat-paginator>
          </div>
      </div>
    </div>
  </div>
