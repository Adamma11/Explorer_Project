<div style="margin: 10px;">
    <p class="tagname">Modify Checks - Component List</p>

<mat-divider></mat-divider>
<!-- <div class="header">
        <div class="mat-card">
          <div class="document-card">
            <h4 class="card-heading" style="padding: 0px; margin: 0px;">Case Information</h4>
          </div>
          <div class="form-card-row">
            <div class="form-card-group">
                <mat-label>Case Id: <span style="color: black !important;">{{caseId}}</span> </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>Candidate Name: <span style="color: black !important;">{{candidateName}}</span> </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>Client: <span style="color: black !important;">{{clientName}}</span> </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>Subclient: <span style="color: black !important;">{{subclientName}}</span> </mat-label>
            </div>
        </div>
        <div class="form-card-row">
            <div class="form-card-group">
                <mat-label>Father Name: <span style="color: black !important;">{{fathername}}</span> </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>D.O.B: <span style="color: black !important;">{{dob | date:'dd-MMM-yyyy' }}</span>
                </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>Contact No: <span style="color: black !important;">{{number}}</span> </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>Email Id: <span style="color: black !important;">{{emailid}}</span> </mat-label>
            </div>
        </div>
        <div class="form-card-row">
            <div class="form-card-group">
                <mat-label>D.O.J: <span style="color: black !important;">{{doj | date:'dd-MMM-yyyy'}}</span> </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>Process: <span style="color: black !important;">{{process}}</span> </mat-label>
            </div>
            <div class="form-card-group">
                <mat-label>Location: <span style="color: black !important;">{{place}}</span> </mat-label>
            </div>
            <div class="form-card-group">
              <mat-label>TAT Start: <span  style="color: black !important;">{{tatStartDate | date:'dd-MMM-yyyy'}}</span> </mat-label>
            </div>
            <div class="form-card-group">
              <mat-label>TaT End: <span  style="color: black !important;">{{tatEndDate | date:'dd-MMM-yyyy'}}</span> </mat-label>
            </div>

        </div>
        </div>
</div> -->
<div class="header">
  <div class="mat-card p-4 shadow-sm">
    <h4 class="card-heading mb-4">Case Information</h4>

    <div class="grid grid-cols-6 gap-4">
      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Case Id</mat-label>
        <input matInput [(ngModel)]="caseData.caseId" readonly />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Candidate Name</mat-label>
        <input matInput [(ngModel)]="caseData.candidateName"/>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Client</mat-label>
        <input matInput [(ngModel)]="caseData.clientName" readonly />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Subclient</mat-label>
        <input matInput [(ngModel)]="caseData.subclientName" readonly />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Father Name</mat-label>
        <input matInput [(ngModel)]="caseData.fathername" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>D.O.B</mat-label>
        <input matInput [matDatepicker]="dobPicker" [(ngModel)]="caseData.dob" />
        <mat-datepicker-toggle matSuffix [for]="dobPicker"></mat-datepicker-toggle>
        <mat-datepicker #dobPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Contact No</mat-label>
        <input matInput [(ngModel)]="caseData.number"  />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Email Id</mat-label>
        <input matInput [(ngModel)]="caseData.emailid" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>D.O.J</mat-label>
        <input matInput [matDatepicker]="dojPicker" [(ngModel)]="caseData.doj" />
        <mat-datepicker-toggle matSuffix [for]="dojPicker"></mat-datepicker-toggle>
        <mat-datepicker #dojPicker></mat-datepicker>
      </mat-form-field>

       <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>EMP ID</mat-label>
        <input matInput [(ngModel)]="caseData.employeeid" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Process</mat-label>
        <input matInput [(ngModel)]="caseData.process"/>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Location</mat-label>
        <input matInput [(ngModel)]="caseData.place" />
      </mat-form-field>

            <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>Aadher number</mat-label>
        <input matInput [(ngModel)]="caseData.aadhernumber" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>PAN</mat-label>
        <input matInput [(ngModel)]="caseData.pancard" />
      </mat-form-field>


      <!-- <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>TAT Start</mat-label>
        <input matInput [matDatepicker]="tatStartPicker" [(ngModel)]="caseData.tatStartDate" readonly />
        <mat-datepicker-toggle matSuffix [for]="tatStartPicker"></mat-datepicker-toggle>
        <mat-datepicker #tatStartPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full dense-input">
        <mat-label>TAT End</mat-label>
        <input matInput [matDatepicker]="tatEndPicker" [(ngModel)]="caseData.tatEndDate" readonly />
        <mat-datepicker-toggle matSuffix [for]="tatEndPicker"></mat-datepicker-toggle>
        <mat-datepicker #tatEndPicker></mat-datepicker>
      </mat-form-field>
    </div> -->

    <div class="mt-6 text-right">
      <button mat-raised-button color="primary" (click)="saveCase()">Save</button>
    </div>
  </div>
   <!-- added code nov-01 -->

 <div class="upload-container mt-4">
  <label class="block text-sm font-medium mb-2">Select Documents</label>

  <div class="upload-row">
    <input type="file" (change)="onFileSelected($event)" multiple class="file-input" />
    <button mat-raised-button color="primary" class="upload-btn" (click)="uploadLoaFile()">
      Upload Files
    </button>
  </div>

  <div *ngIf="selectedFiles.length > 0" class="file-list mt-3">
    <div *ngFor="let file of selectedFiles" class="file-item">
      <mat-icon>description</mat-icon>
      <span class="file-name">{{ file.name }}</span>
    </div>
  </div>
</div>


<!-- ended nov-01 -->
</div>


<table mat-table [dataSource]="dataSource" matSort style="background-color: #f6fafb;">
    <ng-container matColumnDef="serialNumber">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> SL No. </th>
        <td mat-cell *matCellDef="let row; let i = index">
            {{ i + 1  }}
        </td>
    </ng-container>

    <ng-container matColumnDef="component">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Component </th>
        <td mat-cell *matCellDef="let row"> {{row.componentDisplayName}} </td>
    </ng-container>

    <ng-container matColumnDef="checkId">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Check Id </th>
        <td mat-cell *matCellDef="let row"> {{row.checkId}} </td>
    </ng-container>

    <ng-container matColumnDef="field2">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Field 2 </th>
        <td mat-cell *matCellDef="let row"> {{row.field2}} </td>
    </ng-container>

    <ng-container matColumnDef="reinitiate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Reinitiate </th>
        <td mat-cell *matCellDef="let row"> <button  mat-icon-button color="accent" (click)="reinitiateButtonClicked(row)"><mat-icon>undo</mat-icon></button> </td>
    </ng-container>

    <ng-container matColumnDef="addCheck">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Add Check </th>
        <td mat-cell *matCellDef="let row"> <button mat-icon-button color="primary" (click)="addCheckButtonClicked(row)"><mat-icon>add_circle</mat-icon></button> </td>
    </ng-container>

    <ng-container matColumnDef="stopCheck">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Stop Check </th>
        <td mat-cell *matCellDef="let row"> <button [disabled]="row.status == 'OUTPUTQC-ACCEPTED' || row.status == 'MENTOR-REVIEW-ACCEPTED'" mat-icon-button color="warn" (click)="stopCheckClicked(row)"><mat-icon>remove_circle</mat-icon></button> </td>
    </ng-container>

    <ng-container matColumnDef="reinitiatecase">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Push To Final </th>
        <td mat-cell *matCellDef="let row"> <button  mat-icon-button color="accent" (click)="reinitiatecaseButtonClicked(row)"><mat-icon>undo</mat-icon></button> </td>
    </ng-container>

    <ng-container matColumnDef="deleteCheck">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Delete Check </th>
        <td mat-cell *matCellDef="let row"> <button [disabled]="row.status == 'OUTPUTQC-ACCEPTED' || row.status == 'MENTOR-REVIEW-ACCEPTED'" mat-icon-button color="warn" (click)="deleteCheckClicked(row)"><mat-icon>delete_forever</mat-icon></button> </td>
    </ng-container>

    <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
        <td mat-cell *matCellDef="let row"> {{row.status}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <!-- <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" [attr.colspan]="displayedColumns.length">No data matching the filter
            "{{input.value}}"</td>
    </tr> -->
</table>

<mat-card>
    <mat-card-content>
        <mat-accordion>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        History
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <table mat-table [dataSource]="dataSourceHistory" matSort>
                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
                        <td mat-cell *matCellDef="let row"> {{row.date | date:'dd-MMM-yyyy HH:mm' :'GMT'}} </td>
                    </ng-container>
                    <ng-container matColumnDef="user">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> User </th>
                        <td mat-cell *matCellDef="let row"> {{row.user != null ? row.user.name : null}} </td>
                    </ng-container>
                    <ng-container matColumnDef="operation">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Opertion</th>
                        <td mat-cell *matCellDef="let row"> {{row.operation}} </td>
                    </ng-container>
                    <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status</th>
                        <td mat-cell *matCellDef="let row"> {{row.status}} </td>
                    </ng-container>
                    <ng-container matColumnDef="remarks">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Remarks</th>
                        <td mat-cell *matCellDef="let row"> {{row.remarks}} </td>
                    </ng-container>
                    <ng-container matColumnDef="nextfollowupdate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Followup Date</th>
                        <td mat-cell *matCellDef="let row"> {{row.nextfollowupdate}} </td>
                    </ng-container>

                    <ng-container matColumnDef="expectedclosuredate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Closure Date</th>
                        <td mat-cell *matCellDef="let row"> {{row.expectedclosuredate}} </td>
                    </ng-container>
                    <ng-container matColumnDef="allocatedToVendor">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Vendor</th>
                        <td mat-cell *matCellDef="let row"> {{row.allocatedToVendor !== null ?
                            row.allocatedToVendor : ""}} </td>
                    </ng-container>
                    <ng-container matColumnDef="allocatedToFe">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> FE</th>
                        <td mat-cell *matCellDef="let row"> {{row.allocatedToFe !== null ? row.allocatedToFe : ""}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="allocatedToVerifier">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Analyst </th>
                        <td mat-cell *matCellDef="let row"> {{row.allocatedToVerifier !== null ? row.allocatedToVerifier
                            : ""}}</td>
                    </ng-container>
                    <ng-container matColumnDef="verificationcost">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Verification Cost </th>
                        <td mat-cell *matCellDef="let row"> {{row.verificationcost }} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="historyDisplayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: historyDisplayedColumns;"></tr>
                </table>
            </mat-expansion-panel>
        </mat-accordion>
    </mat-card-content>
</mat-card>


</div>